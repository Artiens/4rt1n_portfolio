<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio CTF | Cybersécurité</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
* {margin:0;padding:0;box-sizing:border-box;}
:root {
  --bg-dark:#0a0e27;
  --bg-card:#1a1f3a;
  --accent:#00ff88;
  --text:#e0e0e0;
  --text-dim:#a0a0a0;
  --border:#2a3f5f;
}
body {
  font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
  background:var(--bg-dark);
  color:var(--text);
  line-height:1.6;
  overflow-x:hidden;
}
canvas#matrix {
  position:fixed;
  top:0;left:0;
  width:100%;
  height:100%;
  z-index:-1;
  opacity:0.15;
  pointer-events:none;
}
header {
  background:linear-gradient(135deg,var(--bg-card) 0%,#0f1329 100%);
  padding:2rem 5%;
  border-bottom:2px solid var(--accent);
}
h1 {
  font-size:2.3rem;
  color:var(--accent);
  text-shadow:0 0 10px rgba(0,255,136,0.3);
  margin-bottom:.5rem;
}
.tagline {color:var(--text-dim);}
nav {
  background:var(--bg-card);
  padding:1rem 5%;
  border-bottom:1px solid var(--border);
  position:sticky;top:0;z-index:10;
}
.nav-content {display:flex;gap:2rem;max-width:1200px;margin:auto;}
.nav-btn {
  background:none;border:none;cursor:pointer;color:var(--text-dim);
  transition:.3s;padding:.5rem 1rem;
}
.nav-btn:hover,.nav-btn.active{color:var(--accent);}
main{max-width:1200px;margin:auto;padding:2rem 5%;}
.section{display:none;}
.section.active{display:block;}
.writeup-card {
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:8px;
  padding:1rem;
  margin-bottom:1rem;
  cursor:pointer;
  transition:.3s;
}
.writeup-card:hover{border-color:var(--accent);transform:translateX(3px);}
.writeup-title{color:var(--accent);}
footer {
  background:var(--bg-card);
  border-top:1px solid var(--border);
  text-align:center;
  padding:2rem 5%;
  margin-top:3rem;
  color:var(--text-dim);
}
.error {
  background:#ff004444;
  border:1px solid #ff0044;
  padding:1rem;
  border-radius:5px;
  color:#ff4444;
  margin-bottom:1rem;
}
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<header>
  <h1>&gt; Portfolio CTF_</h1>
  <p class="tagline">Spécialiste en Cybersécurité | Compétiteur CTF</p>
</header>

<nav>
  <div class="nav-content">
    <button class="nav-btn active" onclick="showSection('overview')">Vue d'ensemble</button>
    <button class="nav-btn" onclick="showSection('writeups')">Write-ups</button>
    <button class="nav-btn" onclick="showSection('rankings')">Classements</button>
  </div>
</nav>

<main>
  <section id="overview" class="section active">
    <div id="recentWriteups"></div>
  </section>

  <section id="writeups" class="section">
    <div id="writeupsList"></div>
    <div id="writeupDetail" style="display:none;">
      <button onclick="showWriteupsList()">← Retour</button>
      <div id="writeupContent" class="markdown-content"></div>
    </div>
  </section>

  <section id="rankings" class="section">
    <div id="rankingsTable"></div>
  </section>
</main>

<footer>
  <p>&copy; 2025 Portfolio CTF</p>
</footer>

<script>
const baseUrl="https://raw.githubusercontent.com/Artiens/4rt1n_portfolio/main/data";
let writeupsData=[],rankingsData=[];

async function loadData(){
  try{
    const w=await fetch(`${baseUrl}/writeups.json`);
    writeupsData=await w.json();
    displayWriteups();
    const r=await fetch(`${baseUrl}/rankings.json`);
    rankingsData=await r.json();
  }catch(e){showError('Erreur de chargement');}
}

function displayWriteups(){
  const recent=document.getElementById('recentWriteups');
  const all=document.getElementById('writeupsList');
  if(!writeupsData.length){recent.innerHTML='<p>Aucun write-up</p>';return;}
  const card=w=>`
    <div class="writeup-card" onclick="loadWriteupDetail('${w.file}')">
      <h3 class="writeup-title">${w.title}</h3>
      <p>${w.description}</p>
    </div>`;
  recent.innerHTML=writeupsData.slice(0,3).map(card).join('');
  all.innerHTML=writeupsData.map(card).join('');
}

async function loadWriteupDetail(file){
  try{
    const res=await fetch(`${baseUrl}/writeups/${file}`);
    if(!res.ok)throw new Error('not found');
    const md=await res.text();
    document.getElementById('writeupsList').style.display='none';
    document.getElementById('writeupDetail').style.display='block';
    document.getElementById('writeupContent').innerHTML=marked.parse(md);
    showSection('writeups');
  }catch(e){alert('Impossible de charger le write-up');}
}

function showWriteupsList(){
  document.getElementById('writeupDetail').style.display='none';
  document.getElementById('writeupsList').style.display='block';
}

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
  if(id==='writeups')showWriteupsList();
}

function showError(m){document.getElementById('recentWriteups').innerHTML=`<div class="error">${m}</div>`;}

loadData();

/* --- MATRIX BACKGROUND --- */
const c=document.getElementById('matrix');
const ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight;}
resize();window.addEventListener('resize',resize);
const chars='01アイウエオカキクケコサシスセソタチツテト';
const fontSize=14;
let cols, drops;
function initDrops(){
  cols=Math.floor(c.width/fontSize);
  drops=Array(cols).fill(1);
}
initDrops();
function draw(){
  ctx.fillStyle='rgba(10,14,39,0.1)';
  ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle='rgba(0,255,136,0.3)';
  ctx.font=fontSize+'px monospace';
  for(let i=0;i<drops.length;i++){
    const text=chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>c.height && Math.random()>0.975)drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw,60);
</script>
</body>
</html>
